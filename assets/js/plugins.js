// Generated by CoffeeScript 1.4.0

/*
jQuery Waypoints - v2.0.2
Copyright (c) 2011-2013 Caleb Troughton
Dual licensed under the MIT license and GPL license.
https://github.com/imakewebthings/jquery-waypoints/blob/master/licenses.txt
*/

(function(){var D=[].indexOf||function(c){for(var g=0,n=this.length;g<n;g++)if(g in this&&this[g]===c)return g;return-1},y=[].slice;(function(c,g){return"function"===typeof define&&define.amd?define("waypoints",["jquery"],function(n){return g(n,c)}):g(c.jQuery,c)})(this,function(c,g){var n,z,u,m,A,r,p,v,h,k,w,x,B,t,s,l;n=c(g);v=0<=D.call(g,"ontouchstart");m={horizontal:{},vertical:{}};A=1;p={};r="waypoints-context-id";w="resize.waypoints";x="scroll.waypoints";B=1;t="waypoints-waypoint-ids";s="waypoint";
l="waypoints";z=function(){function a(b){var a=this;this.$element=b;this.element=b[0];this.didScroll=this.didResize=!1;this.id="context"+A++;this.oldScroll={x:b.scrollLeft(),y:b.scrollTop()};this.waypoints={horizontal:{},vertical:{}};b.data(r,this.id);p[this.id]=this;b.bind(x,function(){if(!a.didScroll&&!v)return a.didScroll=!0,g.setTimeout(function(){a.doScroll();return a.didScroll=!1},c[l].settings.scrollThrottle)});b.bind(w,function(){if(!a.didResize)return a.didResize=!0,g.setTimeout(function(){c[l]("refresh");
return a.didResize=!1},c[l].settings.resizeThrottle)})}a.prototype.doScroll=function(){var b,a=this;b={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};if(v&&(!b.vertical.oldScroll||!b.vertical.newScroll))c[l]("refresh");c.each(b,function(b,f){var C,g,q;q=[];C=(g=f.newScroll>f.oldScroll)?f.forward:f.backward;c.each(a.waypoints[b],function(b,
a){var c,e;if(f.oldScroll<(c=a.offset)&&c<=f.newScroll||f.newScroll<(e=a.offset)&&e<=f.oldScroll)return q.push(a)});q.sort(function(b,a){return b.offset-a.offset});g||q.reverse();return c.each(q,function(b,a){if(a.options.continuous||b===q.length-1)return a.trigger([C])})});return this.oldScroll={x:b.horizontal.newScroll,y:b.vertical.newScroll}};a.prototype.refresh=function(){var b,a,d=this;a=c.isWindow(this.element);b=this.$element.offset();this.doScroll();b={horizontal:{contextOffset:a?0:b.left,
contextScroll:a?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:a?0:b.top,contextScroll:a?0:this.oldScroll.y,contextDimension:a?c[l]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};return c.each(b,function(b,a){return c.each(d.waypoints[b],function(b,d){var e,f,g,h,k;e=d.options.offset;g=d.offset;f=c.isWindow(d.element)?
0:d.$element.offset()[a.offsetProp];c.isFunction(e)?e=e.apply(d.element):"string"===typeof e&&(e=parseFloat(e),-1<d.options.offset.indexOf("%")&&(e=Math.ceil(a.contextDimension*e/100)));d.offset=f-a.contextOffset+a.contextScroll-e;if((!d.options.onlyOnScroll||null==g)&&d.enabled){if(null!==g&&g<(h=a.oldScroll)&&h<=d.offset)return d.trigger([a.backward]);if(null!==g&&g>(k=a.oldScroll)&&k>=d.offset||null===g&&a.oldScroll>=d.offset)return d.trigger([a.forward])}})})};a.prototype.checkEmpty=function(){if(c.isEmptyObject(this.waypoints.horizontal)&&
c.isEmptyObject(this.waypoints.vertical))return this.$element.unbind([w,x].join(" ")),delete p[this.id]};return a}();u=function(){function a(a,e,d){var f;d=c.extend({},c.fn[s].defaults,d);"bottom-in-view"===d.offset&&(d.offset=function(){var a;a=c[l]("viewportHeight");c.isWindow(e.element)||(a=e.$element.height());return a-c(this).outerHeight()});this.$element=a;this.element=a[0];this.axis=d.horizontal?"horizontal":"vertical";this.callback=d.handler;this.context=e;this.enabled=d.enabled;this.id="waypoints"+
B++;this.offset=null;this.options=d;e.waypoints[this.axis][this.id]=this;m[this.axis][this.id]=this;d=null!=(f=a.data(t))?f:[];d.push(this.id);a.data(t,d)}a.prototype.trigger=function(a){if(this.enabled&&(null!=this.callback&&this.callback.apply(this.element,a),this.options.triggerOnce))return this.destroy()};a.prototype.disable=function(){return this.enabled=!1};a.prototype.enable=function(){this.context.refresh();return this.enabled=!0};a.prototype.destroy=function(){delete m[this.axis][this.id];
delete this.context.waypoints[this.axis][this.id];return this.context.checkEmpty()};a.getWaypointsByElement=function(a){var e;a=c(a).data(t);if(!a)return[];e=c.extend({},m.horizontal,m.vertical);return c.map(a,function(a){return e[a]})};return a}();k={init:function(a,b){null==b&&(b={});null==b.handler&&(b.handler=a);this.each(function(){var a,d,f;a=c(this);f=null!=(d=b.context)?d:c.fn[s].defaults.context;c.isWindow(f)||(f=a.closest(f));f=c(f);(d=p[f.data(r)])||(d=new z(f));return new u(a,d,b)});c[l]("refresh");
return this},disable:function(){return k._invoke(this,"disable")},enable:function(){return k._invoke(this,"enable")},destroy:function(){return k._invoke(this,"destroy")},prev:function(a,b){return k._traverse.call(this,a,b,function(a,b,c){if(0<b)return a.push(c[b-1])})},next:function(a,b){return k._traverse.call(this,a,b,function(a,b,c){if(b<c.length-1)return a.push(c[b+1])})},_traverse:function(a,b,e){var d,f;null==a&&(a="vertical");null==b&&(b=g);f=h.aggregate(b);d=[];this.each(function(){var b;
b=c.inArray(this,f[a]);return e(d,b,f[a])});return this.pushStack(d)},_invoke:function(a,b){a.each(function(){var a;a=u.getWaypointsByElement(this);return c.each(a,function(a,c){c[b]();return!0})});return this}};c.fn[s]=function(){var a,b;b=arguments[0];a=2<=arguments.length?y.call(arguments,1):[];return k[b]?k[b].apply(this,a):c.isFunction(b)?k.init.apply(this,arguments):c.isPlainObject(b)?k.init.apply(this,[null,b]):b?c.error("The "+b+" method does not exist in jQuery Waypoints."):c.error("jQuery Waypoints needs a callback function or handler option.")};
c.fn[s].defaults={context:g,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1};h={refresh:function(){return c.each(p,function(a,b){return b.refresh()})},viewportHeight:function(){var a;return null!=(a=g.innerHeight)?a:n.height()},aggregate:function(a){var b,e,d;b=m;a&&(b=null!=(d=p[c(a).data(r)])?d.waypoints:void 0);if(!b)return[];e={horizontal:[],vertical:[]};c.each(e,function(a,d){c.each(b[a],function(a,b){return d.push(b)});d.sort(function(a,b){return a.offset-b.offset});e[a]=c.map(d,
function(a){return a.element});return e[a]=c.unique(e[a])});return e},above:function(a){null==a&&(a=g);return h._filter(a,"vertical",function(a,c){return c.offset<=a.oldScroll.y})},below:function(a){null==a&&(a=g);return h._filter(a,"vertical",function(a,c){return c.offset>a.oldScroll.y})},left:function(a){null==a&&(a=g);return h._filter(a,"horizontal",function(a,c){return c.offset<=a.oldScroll.x})},right:function(a){null==a&&(a=g);return h._filter(a,"horizontal",function(a,c){return c.offset>a.oldScroll.x})},
enable:function(){return h._invoke("enable")},disable:function(){return h._invoke("disable")},destroy:function(){return h._invoke("destroy")},extendFn:function(a,b){return k[a]=b},_invoke:function(a){var b;b=c.extend({},m.vertical,m.horizontal);return c.each(b,function(b,c){c[a]();return!0})},_filter:function(a,b,e){var d,f;d=p[c(a).data(r)];if(!d)return[];f=[];c.each(d.waypoints[b],function(a,b){if(e(d,b))return f.push(b)});f.sort(function(a,b){return a.offset-b.offset});return c.map(f,function(a){return a.element})}};
c[l]=function(){var a,b;b=arguments[0];a=2<=arguments.length?y.call(arguments,1):[];return h[b]?h[b].apply(null,a):h.aggregate.call(null,b)};c[l].settings={resizeThrottle:100,scrollThrottle:30};return n.load(function(){return c[l]("refresh")})})}).call(this);

(function(){(function(b,c){return"function"===typeof define&&define.amd?define(["jquery","waypoints"],c):c(b.jQuery)})(this,function(b){var c;c={container:"auto",items:".infinite-item",more:".infinite-more-link",offset:"bottom-in-view",loadingClass:"infinite-loading",onBeforePageLoad:b.noop,onAfterPageLoad:b.noop};return b.waypoints("extendFn","infinite",function(a){var d;a=b.extend({},b.fn.waypoint.defaults,c,a);d="auto"===a.container?this:b(a.container);a.handler=function(c){var e;if("down"===c||
"right"===c)return e=b(this),a.onBeforePageLoad(),e.waypoint("disable"),d.addClass(a.loadingClass),b.get(b(a.more).attr("href"),function(c){var g,f;c=b(c);g=b(a.more);f=c.find(a.more);d.append(c.find(a.items));d.removeClass(a.loadingClass);f.length?(g.replaceWith(f),e.waypoint("enable")):e.waypoint("destroy");return a.onAfterPageLoad()})};return this.waypoint(a)})})}).call(this);